## 理解模块模式

把逻辑分块，各自封装，相互独立，每个块自行决定对外暴露什么，同时自行决定引入执行些外部代码.

#### 模块标识符

模块系统本质上是键/值实体，其中每个模块都有个可用于引用它的标识符。  
将模块标识符解析为实际模块的过程要根据模块系统对标识符的实现。原生浏览器模块标识符必须提供实际 JavaScript 文件的路径。除了文件路径，Node.js 还会搜索 node_modules 目录，用标识符去匹配包含 index.js 的目录。

#### 模块依赖

本地模块向模块系统声明一组外部模块（依赖），这些外部模块对于当前模块正常运行是必需的。

每个模块都会与某个唯一的标识符关联，该标识符可用于检索模块。这个标识符通常是 JavaScript 文件的路径，但在某些模块系统中，这个标识符也可以是在模块本身内部声明的命名空间路径字符串。

#### 模块加载

在浏览器中，加载模块涉及几个步骤。加载模块涉及执行其中的代码，但必须是在所有依赖都加载并执行之后。如果浏览器没有收到依赖模块的代码，则必须发送请求并等待网络返回。收到模块代码之后，浏览器必须确定刚收到的模块是否也有依赖。然后递归地评估并加载所有依赖，直到所有依赖模块都加载完成。只有整个依赖图都加载完成，才可以执行入口模块。

#### 入口

相互依赖的模块必须指定一个模块作为入口（entry point），这也是代码执行的起点。  
因为模块必须在依赖加载完成后才能被加载，所以这个应用程序的入口模块 A 必须在应用程序的其他部分加载后才能执行。

#### 异步依赖

可以让 JavaScript 通知模块系统在必要时加载新模块，并在模块加载完成后提供回调。  
这样有几个好处，其中之一就是性能，因为在页面加载时只需同步加载一个文件。  
比如给`<script>`标签应用 defer 或 async 属性

#### 动态依赖

有些模块系统则允许开发者在程序结构中动态添加依赖。  
动态依赖可以支持更复杂的依赖关系，但代价是增加了对模块进行静态分析的难度。

#### 静态分析

分析工具会检查代码结构并在不实际执行代码的情况下推断其行为。

#### 循环依赖

CommonJS、AMD 和 ES6 在内的所有模块系统都支持循环依赖。
